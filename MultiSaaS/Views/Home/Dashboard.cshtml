@{
    ViewData["Title"] = "Dashboard";
    Layout = "_Layout";
}

<div class="dashboard-container">
    <!-- Mobile Menu Toggle Button (visible on small screens) -->
    <button id="mobileMenuToggle" class="mobile-menu-toggle">
        <i class="fa-solid fa-bars"></i>
    </button>
    
    <!-- Sidebar -->
    <div id="sidebar" class="sidebar expanded">
        <div class="sidebar-header">
            <i class="fa-solid fa-layer-group logo-icon"></i>
            <span class="logo-text">MultiSaaS</span>
            <button id="pinSidebar" class="pin-btn" title="Pin Sidebar">
                <i class="fa-solid fa-thumbtack"></i>
            </button>
        </div>
        
        <div class="sidebar-menu">
            <a href="#" class="menu-item active" data-page="dashboard">
                <i class="fa-solid fa-gauge-high"></i>
                <span>Dashboard</span>
            </a>
            <a href="#" class="menu-item" data-page="users">
                <i class="fa-solid fa-users"></i>
                <span>Users</span>
            </a>
            <a href="#" class="menu-item" data-page="analytics">
                <i class="fa-solid fa-chart-line"></i>
                <span>Analytics</span>
            </a>
            <a href="#" class="menu-item" data-page="projects">
                <i class="fa-solid fa-folder-open"></i>
                <span>Projects</span>
            </a>
            <a href="/Distributor/Dashboard" class="menu-item">
                <i class="fa-solid fa-building"></i>
                <span>Distributor Dashboard</span>
            </a>
            <a href="/SubDistributor/Dashboard" class="menu-item">
                <i class="fa-solid fa-building-user"></i>
                <span>SubDistributor Dashboard</span>
            </a>
            <a href="/User/Dashboard" class="menu-item">
                <i class="fa-solid fa-user"></i>
                <span>User Dashboard</span>
            </a>
            <a href="/SubUser/Dashboard" class="menu-item">
                <i class="fa-solid fa-user-group"></i>
                <span>SubUser Dashboard</span>
            </a>
            <a href="#" class="menu-item" data-page="settings">
                <i class="fa-solid fa-gear"></i>
                <span>Settings</span>
            </a>
        </div>
        
        <div class="sidebar-footer">
            <button id="logoutBtn" title="Logout">
                <i class="fa-solid fa-right-from-bracket"></i>
                <span>Logout</span>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content sidebar-expanded" id="mainContent">
        <!-- Dashboard Page -->
        <div class="page-content active" id="dashboard-page">
            <div class="page-header">
                <h1>Dashboard</h1>
                <p>Welcome to your dashboard overview</p>
            </div>
            
            <div class="row">
                <div class="col-md-4">
                    <div class="dashboard-card">
                        <h2><i class="fa-solid fa-users"></i> Users</h2>
                        <div class="dashboard-card-content">
                            <div class="stat-value">1,254</div>
                            <p>Total registered users</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="dashboard-card">
                        <h2><i class="fa-solid fa-chart-line"></i> Revenue</h2>
                        <div class="dashboard-card-content">
                            <div class="stat-value">$12,345</div>
                            <p>Monthly revenue</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="dashboard-card">
                        <h2><i class="fa-solid fa-folder-open"></i> Projects</h2>
                        <div class="dashboard-card-content">
                            <div class="stat-value">42</div>
                            <p>Active projects</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row mt-4">
                <div class="col-md-12">
                    <div class="dashboard-card">
                        <h2><i class="fa-solid fa-id-card"></i> User Dashboards</h2>
                        <div class="dashboard-card-content">
                            <p>Access specific user dashboards below:</p>
                            <div class="row mt-3">
                                <div class="col-md-3">
                                    <a href="/Distributor/Dashboard" class="btn btn-primary w-100">
                                        <i class="fa-solid fa-building"></i> Distributor
                                    </a>
                                </div>
                                <div class="col-md-3">
                                    <a href="/SubDistributor/Dashboard" class="btn btn-success w-100">
                                        <i class="fa-solid fa-building-user"></i> SubDistributor
                                    </a>
                                </div>
                                <div class="col-md-3">
                                    <a href="/User/Dashboard" class="btn btn-info w-100">
                                        <i class="fa-solid fa-user"></i> User
                                    </a>
                                </div>
                                <div class="col-md-3">
                                    <a href="/SubUser/Dashboard" class="btn btn-warning w-100">
                                        <i class="fa-solid fa-user-group"></i> SubUser
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row mt-4">
                <div class="col-md-8">
                    <div class="dashboard-card">
                        <h2><i class="fa-solid fa-chart-simple"></i> Performance Overview</h2>
                        <div class="dashboard-card-content">
                            <p>This is a placeholder for a chart or graph showing performance metrics.</p>
                            <div class="placeholder-chart"></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="dashboard-card">
                        <h2><i class="fa-solid fa-bell"></i> Recent Notifications</h2>
                        <div class="dashboard-card-content">
                            <ul class="notification-list">
                                <li><i class="fa-solid fa-circle-info"></i> System update scheduled for tomorrow</li>
                                <li><i class="fa-solid fa-user-plus"></i> 5 new users registered today</li>
                                <li><i class="fa-solid fa-triangle-exclamation"></i> Server load at 82%</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- New Distributor Access Card -->
            <div class="row mt-4">
                <div class="col-md-12">
                    <div class="dashboard-card">
                        <h2><i class="fa-solid fa-building"></i> Distributor Management</h2>
                        <div class="dashboard-card-content">
                            <p>Access the distributor management dashboard to manage distributors, channels, payment terms, and sub-distributors.</p>
                            <a href="/Distributor/Dashboard" class="btn btn-primary mt-3">
                                <i class="fa-solid fa-arrow-right"></i> Go to Distributor Dashboard
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Users Page -->
        <div class="page-content" id="users-page">
            <div class="page-header">
                <h1>Users Management</h1>
                <p>View and manage system users</p>
            </div>
            
            <div class="dashboard-card">
                <h2><i class="fa-solid fa-users"></i> User List</h2>
                <div class="dashboard-card-content">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Role</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>John Doe</td>
                                    <td>john@example.com</td>
                                    <td>Admin</td>
                                    <td><span class="badge bg-success">Active</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-primary"><i class="fa-solid fa-edit"></i></button>
                                        <button class="btn btn-sm btn-danger"><i class="fa-solid fa-trash"></i></button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>Jane Smith</td>
                                    <td>jane@example.com</td>
                                    <td>User</td>
                                    <td><span class="badge bg-success">Active</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-primary"><i class="fa-solid fa-edit"></i></button>
                                        <button class="btn btn-sm btn-danger"><i class="fa-solid fa-trash"></i></button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>Bob Johnson</td>
                                    <td>bob@example.com</td>
                                    <td>User</td>
                                    <td><span class="badge bg-danger">Inactive</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-primary"><i class="fa-solid fa-edit"></i></button>
                                        <button class="btn btn-sm btn-danger"><i class="fa-solid fa-trash"></i></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Analytics Page -->
        <div class="page-content" id="analytics-page">
            <div class="page-header">
                <h1>Analytics</h1>
                <p>View system performance and statistics</p>
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="dashboard-card">
                        <h2><i class="fa-solid fa-chart-pie"></i> User Demographics</h2>
                        <div class="dashboard-card-content">
                            <p>This is a placeholder for a pie chart showing user demographics.</p>
                            <div class="placeholder-chart"></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="dashboard-card">
                        <h2><i class="fa-solid fa-chart-line"></i> Growth Trends</h2>
                        <div class="dashboard-card-content">
                            <p>This is a placeholder for a line chart showing growth trends.</p>
                            <div class="placeholder-chart"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Projects Page -->
        <div class="page-content" id="projects-page">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Projects Management</h5>
                                <p class="card-text">Manage all your projects from this dashboard.</p>
                                <div class="projects-grid">
                                    <div class="project-card">
                                        <div class="project-header">
                                            <h6>Website Redesign</h6>
                                            <span class="badge bg-warning">In Progress</span>
                                        </div>
                                        <p>Redesigning the company website with modern UI/UX principles</p>
                                        <div class="project-footer">
                                            <div class="team-members">
                                                <span class="member"><i class="fa-solid fa-user"></i></span>
                                                <span class="member"><i class="fa-solid fa-user"></i></span>
                                            </div>
                                            <div class="project-progress">
                                                <div class="progress">
                                                    <div class="progress-bar" role="progressbar" style="width: 65%" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100"></div>
                                                </div>
                                                <span>65%</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="project-card">
                                        <div class="project-header">
                                            <h6>Mobile App Development</h6>
                                            <span class="badge bg-success">Completed</span>
                                        </div>
                                        <p>Developing a mobile application for customer engagement</p>
                                        <div class="project-footer">
                                            <div class="team-members">
                                                <span class="member"><i class="fa-solid fa-user"></i></span>
                                                <span class="member"><i class="fa-solid fa-user"></i></span>
                                                <span class="member"><i class="fa-solid fa-user"></i></span>
                                            </div>
                                            <div class="project-progress">
                                                <div class="progress">
                                                    <div class="progress-bar" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                                                </div>
                                                <span>100%</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Settings Page -->
            <div class="page-content" id="settings-page">
                <div class="page-header">
                    <h1>Settings</h1>
                    <p>Configure your application settings</p>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">General Settings</h5>
                                <p class="card-text">Configure your application settings here.</p>
                                <form class="settings-form">
                                    <div class="mb-3">
                                        <label for="companyName" class="form-label">Company Name</label>
                                        <input type="text" class="form-control" id="companyName" value="MultiSaaS Inc.">
                                    </div>
                                    <div class="mb-3">
                                        <label for="adminEmail" class="form-label">Admin Email</label>
                                        <input type="email" class="form-control" id="adminEmail" value="admin@multisaas.com">
                                    </div>
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="enableNotifications" checked>
                                        <label class="form-check-label" for="enableNotifications">Enable Email Notifications</label>
                                    </div>
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="enableTwoFactor">
                                        <label class="form-check-label" for="enableTwoFactor">Enable Two-Factor Authentication</label>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save Settings</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">Appearance Settings</h5>
                                <p class="card-text">Customize the appearance of your dashboard.</p>
                                <form class="settings-form">
                                    <div class="mb-4">
                                        <label class="form-label d-block">Theme</label>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="themeOption" id="lightTheme" value="light" checked>
                                            <label class="form-check-label" for="lightTheme">Light Mode</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="themeOption" id="darkTheme" value="dark">
                                            <label class="form-check-label" for="darkTheme">Dark Mode</label>
                                        </div>
                                    </div>
                                    <div class="mb-4">
                                        <label class="form-label d-block">Sidebar Options</label>
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" id="sidebarPinned">
                                            <label class="form-check-label" for="sidebarPinned">Keep Sidebar Pinned</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="sidebarCollapsed">
                                            <label class="form-check-label" for="sidebarCollapsed">Collapse Sidebar by Default</label>
                                        </div>
                                    </div>
                                    <button type="button" id="applyAppearanceSettings" class="btn btn-primary">Apply Settings</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            // Initialize variables from localStorage if available
            let sidebarPinned = localStorage.getItem('sidebarPinned') === 'true';
            let sidebarCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
            let darkTheme = localStorage.getItem('darkTheme') === 'true';
            
            // Initialize UI based on saved settings
            if (darkTheme) {
                $('body').addClass('dark-theme');
                $('#darkTheme').prop('checked', true);
            } else {
                $('#lightTheme').prop('checked', true);
            }
            
            if (sidebarPinned) {
                $('#sidebar').addClass('pinned');
                $('#sidebarPinButton').addClass('active');
                $('#sidebarPinned').prop('checked', true);
            }
            
            if (sidebarCollapsed) {
                $('#sidebar').addClass('collapsed');
                $('#content').addClass('expanded');
                $('#sidebarCollapsed').prop('checked', true);
            }
            
            // Setup page navigation
            $('.menu-item').on('click', function(e) {
                // Only prevent default if it's a page navigation link (has data-page attribute)
                if ($(this).attr('data-page')) {
                    e.preventDefault();
                    
                    // Get the page identifier
                    const pageId = $(this).attr('data-page');
                    
                    // Update active state in sidebar
                    $('.menu-item').removeClass('active');
                    $(this).addClass('active');
                    
                    // Show the corresponding page content
                    $('.page-content').removeClass('active');
                    $('#' + pageId + '-page').addClass('active');
                    
                    // Save current page to localStorage
                    localStorage.setItem('currentPage', pageId);
                }
                // If it's a direct link (like to Distributor Dashboard), let it navigate normally
            });
            
            // Initialize from localStorage if available
            const currentPage = localStorage.getItem('currentPage');
            if (currentPage) {
                const activeItem = $('.menu-item[data-page="' + currentPage + '"]');
                if (activeItem.length) {
                    // Simulate a click on the active item
                    activeItem.click();
                }
            }
            
            // Mobile menu toggle
            $('#mobileMenuToggle').on('click', function() {
                $('#sidebar').toggleClass('mobile-expanded');
            });
        });
    </script>
}